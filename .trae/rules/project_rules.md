# 项目开发规范

## 1. 对决系统 (Duel System) 规范

为了保证对决过程透明、合理且具备仪式感，对决系统必须严格遵循以下阶段和步骤。

### 对决阶段 (Stages) 与 步骤 (Steps)

| 阶段 (Stage) | 步骤 (Step) | 说明 | 结算结果 (Result) |
|-------------|------------|------|-------------------|
| **1. 准备 (Preparation)** | 1.1 初始化对决 | 展示对决双方球员 | - |
| **2. 基础对决 (Base Power)** | 2.1 进攻方基础 | 展示进攻球员基础力量 | 进攻方初始值 |
| | 2.2 防守方基础 | 展示防守球员基础力量 | 防守方初始值 |
| **3. 增益结算 (Buffs)** | 3.1 协同加成 | 翻开盖放的协同卡并计算加成 | 双方力量累加 |
| | 3.2 技能激活 | 展示并计算激活的球员技能 | 最终力量确定 |
| **4. 总结与结果 (Conclusion)** | 4.1 对决总结 | 展示最终力量对比与加成明细 | 阶段总结 |
| | 4.2 最终结果 | 展示进球、扑救或射失动画 | 对决结果 |

### UI 实现要求
- **阶段信息展示**：每个阶段开始时，需在显著位置展示当前阶段名称（如 Stage 2）。
- **步骤信息展示**：每个步骤开始时，展示当前步骤的动作描述。
- **动态结算**：力量数值必须采用递增动画，禁止瞬间跳变。
- **协同卡盖放**：协同卡必须先以背面（Face Down）状态进入场上，待到 3.1 步骤时统一翻开。
- **可追溯性**：所有对决步骤必须记录在 `matchLogs` 中，方便玩家随时查看。

## 2. AI 动作规范
- **视觉反馈**：AI 的动作（抽卡、放卡、射门）必须有明确的停顿和视觉提示，不能在后台静默完成。
- **协同卡展示**：AI 在射门或防守时选择协同卡的过程，必须在 UI 上体现出“正在选牌”和“盖牌”的动作。

## 3. 代码结构规范
- **组件化**：UI 功能模块必须解耦，如 `MatchLog`, `DuelOverlay`, `SynergyPanel` 等。
- **状态驱动**：游戏逻辑必须由 `gameLogic.ts` 中的 `GameState` 统一驱动，组件仅负责渲染状态。
- **日志记录**：关键操作（Action）必须调用 `addLog` 记录。

---

## 4. 环境与提交规范
- 自行检查新 3D 环境，确保预览无误。
- 提交代码前检查语法与逻辑错误。
- 以双人对战视角考虑 UI 布局。

当一个设计师想要推演自己的游戏新加入某个规则会怎样，或者反向剖析他人的游戏，则建议使用机制－运行－体验的分析方法，然后按ERG需求理论（在第三卷会有详细论述），导入不同类型的用户模型，模拟推演他们在自己设计中的行为，之后谨慎地调整自己的系统机制，以保证综合最优。
当一个策划检查自己游戏的体验好不好时，最好使用表现－机制－灵魂的检查方式，看自己能否在忘记原有规则的情况下，只靠少量系统提示（当然也有可能你根本没做任何提示），即可从表现感知到规则甚至灵魂。《皇室战争》即是典型的成功案例，在网络互联操作系统(Internetworking Operating System-Cisco，IOS)美服中，其作为创新游戏，它的次日留存（指第二天，依然登录游戏的用户百分比）甚至可以好到77%，这与其顶级的表现层设计是分不开的。
结合使用以上3种方法，可以很好地帮助大家理解游戏在不同情况下的运行状态。我们可以发现游戏在不同的情况下展现了不同的姿态，我们需要用正确的方法对不同的姿态进行研究和游戏的设计制作。

哲学化也有其缺陷。越抽象的理论越泛用，但也越错误；越具体的理论越局限，但也越正确。任何真正的真理都是局部真理，但在那个局部，就是真理。
人类的本体就是五根手指。